<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Gold API - CORS-Enabled Data Access</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 900px;
            margin: 40px auto;
            padding: 20px;
            line-height: 1.6;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        .endpoint {
            background: #e8f4f8;
            padding: 15px;
            margin: 20px 0;
            border-left: 4px solid #0066cc;
        }
    </style>
</head>
<body>
    <h1>Free Gold API - CORS-Enabled Access</h1>

    <p>Historical gold prices from 1258-2025, updated daily. All endpoints support cross-origin requests.</p>

    <h2>Available Endpoints</h2>

    <div class="endpoint">
        <h3>JSON Endpoint (Recommended)</h3>
        <p><strong>URL:</strong> <code>https://www.freegoldapi.com/data/latest.json</code></p>
        <p><strong>Format:</strong> JSON array of objects</p>
        <p><strong>CORS:</strong> Enabled via GitHub Pages</p>
        <pre><code>fetch('https://www.freegoldapi.com/data/latest.json')
  .then(response => response.json())
  .then(data => console.log(data));</code></pre>
    </div>

    <div class="endpoint">
        <h3>CSV Endpoint (Legacy)</h3>
        <p><strong>URL:</strong> <code>https://www.freegoldapi.com/data/latest.csv</code></p>
        <p><strong>Format:</strong> CSV with headers: date, price, source</p>
        <p><strong>Note:</strong> May require CORS proxy for some browsers</p>
    </div>

    <div class="endpoint">
        <h3>CDN Endpoint (Alternative with CORS)</h3>
        <p><strong>URL:</strong> <code>https://cdn.jsdelivr.net/gh/posix4e/gold-spot-downloader@main/data/latest.json</code></p>
        <p><strong>Format:</strong> JSON via jsDelivr CDN</p>
        <p><strong>CORS:</strong> Fully enabled</p>
        <p><strong>Cache:</strong> 12-hour CDN cache</p>
    </div>

    <h2>Example Usage</h2>

    <h3>Fetch and Display Gold Prices</h3>
    <pre><code>async function fetchGoldData() {
  try {
    const response = await fetch('https://www.freegoldapi.com/data/latest.json');
    const data = await response.json();

    // Get latest price
    const latest = data[data.length - 1];
    console.log(`Latest gold price: $${latest.price} USD on ${latest.date}`);

    // Filter data from a specific year
    const year2024 = data.filter(item => item.date.startsWith('2024'));
    console.log(`${year2024.length} data points from 2024`);

    return data;
  } catch (error) {
    console.error('Error fetching gold data:', error);
  }
}

fetchGoldData();</code></pre>

    <h3>Use with Chart.js</h3>
    <pre><code>async function createGoldChart() {
  const response = await fetch('https://www.freegoldapi.com/data/latest.json');
  const data = await response.json();

  // Filter last 365 days
  const recentData = data.slice(-365);

  const ctx = document.getElementById('goldChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      labels: recentData.map(d => d.date),
      datasets: [{
        label: 'Gold Price (USD)',
        data: recentData.map(d => d.price),
        borderColor: 'rgb(255, 215, 0)',
        backgroundColor: 'rgba(255, 215, 0, 0.1)'
      }]
    }
  });
}</code></pre>

    <h2>Data Structure</h2>
    <pre><code>[
  {
    "date": "1258-01-01",
    "price": 0.89,
    "source": "measuringworth_british (GBP)"
  },
  {
    "date": "2025-10-24",
    "price": 2745.80,
    "source": "yahoo_finance"
  }
]</code></pre>

    <h2>Response Fields</h2>
    <ul>
        <li><strong>date</strong>: ISO 8601 date string (YYYY-MM-DD)</li>
        <li><strong>price</strong>: Gold price in USD per troy ounce (float)</li>
        <li><strong>source</strong>: Data source name and currency (string)</li>
    </ul>

    <h2>Data Coverage</h2>
    <ul>
        <li>1258-1717: British Official Prices (GBP)</li>
        <li>1718-1959: London Market Prices (GBP/USD)</li>
        <li>1960-2024: World Bank Monthly Prices (USD)</li>
        <li>2025-present: Yahoo Finance Daily Futures (USD)</li>
    </ul>

    <h2>Update Frequency</h2>
    <p>Data is automatically updated daily at 6 AM UTC via GitHub Actions.</p>

    <h2>Attribution</h2>
    <p>Data sources:</p>
    <ul>
        <li><a href="https://www.measuringworth.com/datasets/gold/">MeasuringWorth</a> - Historical gold prices</li>
        <li><a href="https://www.worldbank.org/">World Bank</a> - Commodity price data</li>
        <li><a href="https://finance.yahoo.com/">Yahoo Finance</a> - Current futures prices</li>
    </ul>

    <h2>Test the API</h2>
    <button id="testBtn" onclick="testAPI()">Test JSON Endpoint</button>
    <pre id="result" style="display:none; margin-top: 10px;"></pre>

    <script>
        async function testAPI() {
            const resultEl = document.getElementById('result');
            const btn = document.getElementById('testBtn');

            btn.textContent = 'Loading...';
            btn.disabled = true;

            try {
                const response = await fetch('https://www.freegoldapi.com/data/latest.json');
                const data = await response.json();

                const latest = data[data.length - 1];
                const oldest = data[0];

                resultEl.textContent = `Success! Fetched ${data.length} records\n\n` +
                    `Oldest: ${oldest.date} - $${oldest.price} (${oldest.source})\n` +
                    `Latest: ${latest.date} - $${latest.price} (${latest.source})`;
                resultEl.style.display = 'block';

                btn.textContent = 'Test Successful ✓';
                btn.style.background = '#4caf50';
                btn.style.color = 'white';
            } catch (error) {
                resultEl.textContent = `Error: ${error.message}`;
                resultEl.style.display = 'block';
                btn.textContent = 'Test Failed ✗';
                btn.disabled = false;
            }
        }
    </script>

    <footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ddd; color: #666;">
        <p>Free Gold API | <a href="https://github.com/posix4e/gold-spot-downloader">GitHub Repository</a> | <a href="/">Main Site</a></p>
    </footer>
</body>
</html>
