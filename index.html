<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>freegoldapi.com - Free Historical Gold Price Data (1258-2025)</title>

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://freegoldapi.com/">
    <meta property="og:title" content="freegoldapi.com - Free Historical Gold Price Data (1258-2025)">
    <meta property="og:description" content="Free, comprehensive historical gold price data spanning 768 years. 1,678 records from British Official Prices through modern futures markets.">
    <meta property="og:image" content="https://freegoldapi.com/preview.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://freegoldapi.com/">
    <meta name="twitter:title" content="freegoldapi.com - Free Historical Gold Price Data (1258-2025)">
    <meta name="twitter:description" content="Free, comprehensive historical gold price data spanning 768 years. 1,678 records from British Official Prices through modern futures markets.">
    <meta name="twitter:image" content="https://freegoldapi.com/preview.png">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            background-color: #f5f5f5;
        }
        .hero {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        .hero h1 {
            margin: 0 0 10px 0;
            color: #333;
        }
        .hero p {
            margin: 5px 0;
            color: #555;
        }
        .section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .section h2 {
            margin-top: 0;
            color: #333;
        }
        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            height: 500px;
        }
        .legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .legend-item {
            background: white;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .legend-item h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
        }
        .legend-item p {
            margin: 5px 0;
            font-size: 14px;
            color: #666;
        }
        .legend-item .granularity {
            font-weight: bold;
            color: #333;
        }
        .stat {
            background: #f5f5f5;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        footer {
            text-align: center;
            margin-top: 40px;
            color: #666;
            font-size: 14px;
        }
        a {
            color: #0066cc;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>ðŸ“Š freegoldapi.com</h1>
        <p><strong>Free, comprehensive historical gold price data spanning 768 years (1258-2025)</strong></p>
        <p>1,678 records from British Official Prices through modern futures markets</p>
    </div>

    <div class="section">
        <h2>ðŸ“¥ Download Data</h2>
        <div id="lastUpdated" style="background: #f0f8ff; padding: 10px; border-radius: 5px; margin-bottom: 15px; font-size: 14px;">
            <strong>Last Updated:</strong> <span id="updateTime">Loading...</span><br>
            <strong>Most Recent Data:</strong> <span id="latestDate">Loading...</span> |
            <strong>Gold Price:</strong> <span id="latestPrice">Loading...</span> |
            <strong>Gold/Silver Ratio:</strong> <span id="latestRatio">Loading...</span>
        </div>

        <p><strong>Primary dataset (USD-normalized):</strong> <a href="data/latest.csv">data/latest.csv</a></p>
        <p style="margin-left: 20px; font-size: 14px; color: #666;">
            CSV with columns: <code>date, price, source</code><br>
            All prices normalized to USD where possible using historical USD/GBP exchange rates (1791-present).<br>
            Pre-1791 British prices remain in GBP due to lack of reliable exchange rate data.<br>
            The <code>source</code> column shows both the data source and normalization status:
            <ul style="margin: 5px 0 0 20px; padding-left: 20px;">
                <li><code>measuringworth_british (GBP)</code> - Original GBP price (pre-1791, no conversion available)</li>
                <li><code>measuringworth_london (GBP->USD)</code> - Converted from GBP to USD using historical exchange rates</li>
                <li><code>worldbank</code> - Already in USD (no conversion needed)</li>
                <li><code>yahoo_finance</code> - Already in USD (no conversion needed)</li>
            </ul>
        </p>

        <p><strong>Silver-enriched dataset:</strong> <a href="data/gold_silver_ratio_enriched.csv">data/gold_silver_ratio_enriched.csv</a></p>
        <p style="margin-left: 20px; font-size: 14px; color: #666;">
            CSV with columns: <code>date, price, silver_oz_per_gold_oz</code><br>
            Includes gold/silver ratio showing ounces of silver per ounce of gold (1687-present, daily for 2025+)
        </p>

        <p><strong>Silver-normalized dataset (metallic standard):</strong> <a href="data/gold_silver_normalized.csv">data/gold_silver_normalized.csv</a></p>
        <p style="margin-left: 20px; font-size: 14px; color: #666;">
            CSV with columns: <code>date, price, source</code><br>
            Alternative view where gold's "price" is expressed in <strong>ounces of silver</strong>, not currency.<br>
            This transcends fiat currency fluctuations and reflects historical metallic standards (like U.S. silver redemption).<br>
            The price column represents how many ounces of silver equal one ounce of gold.<br>
            <br>
            <strong>Coverage:</strong> 1,248 records from 1688-present (74% of all gold price data)<br>
            <ul style="margin: 5px 0 0 20px; padding-left: 20px;">
                <li>1688-1717: Annual ratios applied to annual gold prices (30 records)</li>
                <li>1718-1959: Annual ratios applied to annual gold prices (242 records)</li>
                <li>1960-2024: Annual ratios applied to monthly gold prices (780 records)</li>
                <li>2025-present: Daily ratios applied to daily gold prices (196 records)</li>
            </ul>
            <em>Note: Pre-1688 gold prices (1258-1687, 430 records) cannot be silver-normalized due to lack of historical gold/silver ratio data.</em>
        </p>

        <p style="margin-top: 15px;"><em>All datasets automatically updated daily</em></p>
    </div>

    <div class="section">
        <h2>ðŸ“Š Interactive Data Source Timeline</h2>
        <p>Visual representation of our data sources and their coverage periods</p>
    </div>

    <div class="chart-container">
        <canvas id="timelineChart"></canvas>
    </div>

    <div class="legend" id="legendContainer">
        <!-- Will be populated dynamically -->
    </div>

    <div class="section">
        <h2>ðŸ“ˆ Coverage Summary</h2>
        <ul id="coverageSummary">
            <!-- Will be populated dynamically -->
        </ul>
    </div>

    <div class="section">
        <h2>ðŸ”„ Merge Strategy</h2>

        <h3>Gold Price Data:</h3>
        <p><strong>Priority Order:</strong> When dates overlap, we use the following priority (highest first):</p>
        <ol>
            <li><strong>Yahoo Finance</strong> - Daily data, 2025-present (highest priority, most granular current data)</li>
            <li><strong>World Bank</strong> - Monthly data, 1960-2024</li>
            <li><strong>MeasuringWorth London</strong> - Annual data, 1718-1959</li>
            <li><strong>MeasuringWorth British</strong> - Annual data, 1257-1717 (fills oldest historical gaps)</li>
        </ol>
        <p>This provides comprehensive historical gold price data spanning nearly 800 years (1257-2025) with increasing granularity over time.</p>

        <h3>Silver Data & Gold/Silver Ratios:</h3>
        <p>Silver data is NOT merged into the gold price dataset. Instead, it's used to calculate current gold/silver ratios:</p>
        <ul>
            <li><strong>Historical ratios (1688-2024)</strong>: From MeasuringWorth (annual, Jan 1 each year)</li>
            <li><strong>Current ratios (2025-present)</strong>: Calculated by dividing Yahoo Finance gold prices (GC=F) by silver prices (SI=F) daily</li>
            <li>Both historical and calculated ratios are merged into the <code>gold_silver_ratio_enriched.csv</code> dataset</li>
            <li>When dates overlap, calculated ratios from Yahoo Finance take priority over historical annual ratios</li>
        </ul>
        <p>This approach ensures both gold and silver data remain fresh, with the ratio automatically updating as markets move.</p>

        <h3>Silver-Normalized Dataset Strategy:</h3>
        <p>The <code>gold_silver_normalized.csv</code> dataset applies gold/silver ratios to gold prices to create a metallic standard view:</p>
        <ul>
            <li><strong>Ratio application</strong>: Annual ratios (from MeasuringWorth) are applied to ALL dates within the same year</li>
            <li><strong>Daily ratios (2025+)</strong>: Daily Yahoo Finance ratios are matched to their specific dates</li>
            <li><strong>Coverage limitation</strong>: Only dates with ratio data (1688+) can be silver-normalized</li>
            <li>This provides 1,248 records (74% coverage) vs. 1,678 total gold price records</li>
        </ul>
        <p><em>Example: The 2020 annual ratio (72.04) is applied to all 12 monthly World Bank gold prices in 2020, providing a consistent metallic standard for that year.</em></p>
    </div>

    <div class="section">
        <h2>ðŸ“š Source Attribution</h2>
        <ul>
            <li><strong>British Official Price (1258-1717)</strong>: <a href="https://www.measuringworth.com/datasets/gold/">MeasuringWorth</a> (annual)
                <br><small>Citation: Lawrence H. Officer and Samuel H. Williamson, 'The Price of Gold, 1257-1945,' MeasuringWorth, 2025</small>
            </li>
            <li><strong>Gold/Silver Ratio (1687-present)</strong>: <a href="https://www.measuringworth.com/datasets/gold/">MeasuringWorth</a> (annual)
                <br><small>Citation: Lawrence H. Officer and Samuel H. Williamson, 'The Price of Gold, 1257-2024,' MeasuringWorth, 2025</small>
                <br><small>Ratio shows ounces of silver per ounce of gold</small>
            </li>
            <li><strong>London Market Price (1718-1959)</strong>: <a href="https://www.measuringworth.com/datasets/gold/">MeasuringWorth</a> (annual)
                <br><small>Citation: Lawrence H. Officer and Samuel H. Williamson, 'The Price of Gold, 1718-2024,' MeasuringWorth, 2025</small>
            </li>
            <li><strong>Dollar-Pound Exchange Rate (1791-present)</strong>: <a href="https://www.measuringworth.com/datasets/exchangepound/">MeasuringWorth</a> (annual)
                <br><small>Citation: Lawrence H. Officer, 'Dollar-Pound Exchange Rate From 1791,' MeasuringWorth, 2025</small>
                <br><small>Exchange rate shows USD per British pound</small>
            </li>
            <li><strong>World Bank Commodity Prices (1960-2024)</strong>: <a href="https://www.worldbank.org/en/research/commodity-markets">World Bank Pink Sheet</a> (monthly)
                <br><small>Gold prices in USD per troy ounce</small>
            </li>
            <li><strong>Yahoo Finance Gold (2025-present)</strong>: <a href="https://finance.yahoo.com/quote/GC=F">Gold Futures (GC=F)</a> (daily)
                <br><small>Current gold futures prices in USD per troy ounce</small>
            </li>
            <li><strong>Yahoo Finance Silver (2025-present)</strong>: <a href="https://finance.yahoo.com/quote/SI=F">Silver Futures (SI=F)</a> (daily)
                <br><small>Silver futures prices used to calculate current gold/silver ratios</small>
            </li>
        </ul>
    </div>

    <footer>
        <p><a href="https://github.com/posix4e/gold-spot-downloader">GitHub Repository</a></p>
        <p>Data compiled for non-profit educational purposes</p>
        <p><small>MeasuringWorth data used with proper attribution as per their terms of use.</small></p>
    </footer>

    <script>
        // Source metadata
        const sourceMetadata = {
            'measuringworth_british': {
                name: 'MeasuringWorth - British Official Price',
                granularity: 'Annual',
                color: '#8B4513',
                url: 'https://www.measuringworth.com/datasets/gold/',
                description: 'Oldest gold price data available'
            },
            'gold_silver_ratio': {
                name: 'MeasuringWorth - Gold/Silver Ratio',
                granularity: 'Annual',
                color: '#C0C0C0',
                url: 'https://www.measuringworth.com/datasets/gold/',
                description: 'Gold/silver price ratio (1687-2024, annual)'
            },
            'yahoo_silver': {
                name: 'Yahoo Finance - Silver Futures',
                granularity: 'Daily',
                color: '#B8B8B8',
                url: 'https://finance.yahoo.com/quote/SI=F',
                description: 'Silver futures for calculating current ratios (2025-present)'
            },
            'measuringworth_london': {
                name: 'MeasuringWorth - London Market Price',
                granularity: 'Annual',
                color: '#DAA520',
                url: 'https://www.measuringworth.com/datasets/gold/',
                description: 'London market price from 1718'
            },
            'dollar_pound_exchange': {
                name: 'MeasuringWorth - USD/GBP Exchange Rate',
                granularity: 'Annual',
                color: '#4169E1',
                url: 'https://www.measuringworth.com/datasets/exchangepound/',
                description: 'Dollar-pound exchange rate (1791-present)'
            },
            'worldbank': {
                name: 'World Bank Commodity Prices',
                granularity: 'Monthly',
                color: '#FFD700',
                url: 'https://www.worldbank.org/en/research/commodity-markets',
                description: 'Pink Sheet gold prices (1960-2024)'
            },
            'yahoo_finance': {
                name: 'Yahoo Finance - Gold Futures',
                granularity: 'Daily',
                color: '#FFA500',
                url: 'https://finance.yahoo.com/quote/GC=F',
                description: 'Current gold futures prices (2025-present)'
            }
        };

        // Load and display data
        Promise.all([
            fetch('data/source_ranges_full.json').then(r => r.json()),
            fetch('data/source_stats.json').then(r => r.json()),
            fetch('data/generation_metadata.json').then(r => r.json())
        ])
            .then(([fullRanges, usedStats, metadata]) => {
                console.log('Loaded full ranges:', fullRanges);
                console.log('Loaded used stats:', usedStats);
                console.log('Loaded metadata:', metadata);
                createTimeline(fullRanges);
                createLegend(fullRanges, usedStats);
                createCoverageSummary(usedStats);
                updateMetadata(metadata);
            })
            .catch(error => {
                console.error('Error loading source data:', error);
                const isFileProtocol = window.location.protocol === 'file:';
                const errorMsg = isFileProtocol
                    ? '<p style="color: #d9534f; text-align: center;"><strong>CORS Error:</strong> This page must be served via HTTP/HTTPS to load data.<br>Run <code>python -m http.server</code> in the project directory and visit <code>http://localhost:8000</code></p>'
                    : '<p style="color: #999; text-align: center;">Source statistics will appear here after running the update script.</p>';
                document.getElementById('legendContainer').innerHTML = errorMsg;
            });

        function updateMetadata(metadata) {
            if (!metadata) return;

            // Format the update time
            const updateDate = new Date(metadata.generated_at);
            document.getElementById('updateTime').textContent = updateDate.toLocaleString();

            // Show most recent data
            if (metadata.date_range) {
                const latestDataDate = new Date(metadata.date_range.latest + 'T00:00:00');
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                latestDataDate.setHours(0, 0, 0, 0);

                const daysDiff = Math.floor((today - latestDataDate) / (1000 * 60 * 60 * 24));
                const latestDay = latestDataDate.getDay();
                const isWeekend = (latestDay === 6 || latestDay === 0); // Saturday or Sunday
                const todayIsWeekend = (today.getDay() === 6 || today.getDay() === 0);

                let dateText = metadata.date_range.latest || 'N/A';

                // If data is from Friday and today is weekend, show weekend icon
                if (daysDiff >= 1 && daysDiff <= 2 && latestDay === 5 && todayIsWeekend) {
                    dateText += ' ðŸŒ´ (markets closed for weekend)';
                } else if (daysDiff >= 1) {
                    dateText += ` (${daysDiff} day${daysDiff > 1 ? 's' : ''} ago)`;
                }

                document.getElementById('latestDate').textContent = dateText;
            }

            // Show latest gold price
            if (metadata.most_recent_data && metadata.most_recent_data.yahoo_finance_gold) {
                const price = metadata.most_recent_data.yahoo_finance_gold.latest_price;
                document.getElementById('latestPrice').textContent = price ? `$${price.toFixed(2)} USD` : 'N/A';
            }

            // Show latest gold/silver ratio
            if (metadata.most_recent_data && metadata.most_recent_data.gold_silver_ratio) {
                const ratio = metadata.most_recent_data.gold_silver_ratio.latest_ratio;
                const source = metadata.most_recent_data.gold_silver_ratio.source;
                document.getElementById('latestRatio').textContent = ratio ? `${ratio.toFixed(2)} (${source})` : 'N/A';
            }
        }

        function createTimeline(stats) {
            const ctx = document.getElementById('timelineChart').getContext('2d');

            const datasets = Object.entries(stats).map(([source, data]) => {
                const metadata = sourceMetadata[source] || {};
                const startYear = parseInt(data.start.split('-')[0]);
                const endYear = parseInt(data.end.split('-')[0]);

                return {
                    label: metadata.name || source,
                    data: [{
                        x: [new Date(startYear, 0, 1), new Date(endYear, 11, 31)],
                        y: metadata.name || source
                    }],
                    backgroundColor: metadata.color || '#999',
                    borderColor: '#333',
                    borderWidth: 2,
                    barThickness: 40
                };
            });

            new Chart(ctx, {
                type: 'bar',
                data: { datasets },
                options: {
                    indexAxis: 'y',
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Data Source Coverage Timeline (1200 - Present)',
                            font: { size: 18 }
                        },
                        legend: { display: false },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const start = new Date(context.raw.x[0]);
                                    const end = new Date(context.raw.x[1]);
                                    const years = end.getFullYear() - start.getFullYear() + 1;
                                    return [
                                        `${context.dataset.label}`,
                                        `Range: ${start.getFullYear()} - ${end.getFullYear()}`,
                                        `Years covered: ${years}`
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'time',
                            time: {
                                unit: 'year',
                                displayFormats: { year: 'yyyy' }
                            },
                            title: {
                                display: true,
                                text: 'Year',
                                font: { size: 14 }
                            },
                            min: new Date(1200, 0, 1),
                            max: new Date(new Date().getFullYear() + 1, 0, 1)
                        },
                        y: {
                            type: 'category',
                            title: {
                                display: true,
                                text: 'Data Source',
                                font: { size: 14 }
                            }
                        }
                    }
                }
            });
        }

        function createLegend(fullRanges, usedStats) {
            const legendHtml = Object.entries(fullRanges).map(([source, fullData]) => {
                const metadata = sourceMetadata[source] || {};
                const usedData = usedStats[source] || fullData;

                const fullStartYear = parseInt(fullData.start.split('-')[0]);
                const fullEndYear = parseInt(fullData.end.split('-')[0]);
                const fullYears = fullEndYear - fullStartYear + 1;

                const usedStartYear = parseInt(usedData.start.split('-')[0]);
                const usedEndYear = parseInt(usedData.end.split('-')[0]);
                const usedYears = usedEndYear - usedStartYear + 1;

                return `
                    <div class="legend-item" style="border-left-color: ${metadata.color || '#999'};">
                        <h3>${metadata.name || source}</h3>
                        <p class="granularity">${metadata.granularity || 'Unknown'} granularity</p>
                        <p><strong>Full coverage:</strong> ${fullData.start} to ${fullData.end} (${fullData.count.toLocaleString()} records, ${fullYears.toLocaleString()} years)</p>
                        <p><strong>Used in dataset:</strong> ${usedData.count.toLocaleString()} records from ${usedData.start} to ${usedData.end} (${usedYears.toLocaleString()} years)</p>
                        <p>${metadata.description || ''}</p>
                        ${metadata.url ? `<p><a href="${metadata.url}" target="_blank">Visit source â†’</a></p>` : ''}
                    </div>
                `;
            }).join('');

            document.getElementById('legendContainer').innerHTML = legendHtml;
        }

        function createCoverageSummary(usedStats) {
            const summaryHtml = Object.entries(usedStats).map(([source, stats]) => {
                const metadata = sourceMetadata[source] || {};
                const sourceName = metadata.name || source;
                return `
                    <li><strong>${sourceName}</strong>: ${stats.count.toLocaleString()} records (${stats.start} to ${stats.end})
                        <a href="data/backfill/${source}_latest.csv">[download raw data]</a></li>
                `;
            }).join('');

            document.getElementById('coverageSummary').innerHTML = summaryHtml;
        }
    </script>
</body>
</html>
